$('#gonvariables').html("<%= j Gon::Base.render_data %>");

if (COPO.utility.urlParam("redirect")) {
  window.location.replace(COPO.utility.urlParam("redirect"));
}
$('nav').replaceWith("<%= j (render partial: 'navbar') %>");
$('#approved').html("<%= j (render partial: 'approved', locals: {approved: @presenter.approved, devices: @presenter.devices, approvable_type: @presenter.approvable_type}) %>");
<% if @presenter.pending.present? %>
  $('#pending').html("<%= j (render partial: 'pending', locals: {pending: @presenter.pending}) %>");
<% else %>
  $('#pending').remove();
<% end %>
$(".button-collapse").sideNav();
$(document).unbind('scroll');
var page = ($(".c-approvals.a-apps").length === 1 ? 'apps' : 'friends');
COPO.permissionsTrigger.initTrigger(page);
COPO.permissions.initSwitches(page, gon.current_user_id, gon.permissions);

if(gon.friends && gon.friends.some(function(friend){ return friend.lastCheckin })) {
  $('#map-overlay').addClass('hide');
  COPO.maps.refreshFriendMarkers(gon.friends);
} else if(gon.friends){
  if(COPO.maps.friendMarkers){ map.removeLayer(COPO.maps.friendMarkers) }
  $('#map-overlay').removeClass('hide');
}
